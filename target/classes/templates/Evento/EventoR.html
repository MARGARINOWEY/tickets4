<!DOCTYPE html>
<html lang="en">
    <head th:replace="layout/layoutMain :: head"></head>

    <body data-col="2-columns" class=" 2-columns hidden">
        <div class="centreadooo" id="onload">
            <div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
        </div>
    <!-- ////////////////////////////////////////////////////////////////////////////-->
    <div class="wrapper">
        <div th:replace="layout/layoutMain :: menuLateral"></div>
        <div th:replace="layout/layoutMain :: menuNavbar"></div>    
        <div class="main-panel">
            <div class="main-content">
                <div class="content-wrapper">
                    <div class="container-fluid">
                        <section id="alert">
                            <div class="row match-height">
                                <div class="col-sm-12">
                                    <h2 class="content-header">REGISTRO DE EVENTO</h2>
                                </div>
                            </div>
                            <!--Alert States Starts-->
                            <div class="row match-height">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="card-title-wrap bar-success">
                                                <h4 style="color: #28D094;" class="card-title"></i> Nuevo Evento</h4>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="card-block">
                                                <form action="../../../../eventoF" method="POST" enctype="multipart/form-data" novalidate>
                                                    <input type="hidden" th:field="${evento.id_evento}">
                                                    <div class="form-body">
                                                        <div class="row">
                                                            <div class="col-lg-4 col-sm-12">
                                                                <div class="form-group">
                                                                    <label for="eventRegInput1">Descripci√≥n del evento</label>                                        
                                                                    <input onkeyup="javascript:this.value=this.value.toUpperCase();" style="text-transform:uppercase;" type="text" id="eventRegInput1" class="form-control" th:field="${evento.desc_evento}" required>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-8 col-sm-12">
                                                                <div class="form-group">
                                                                    <label for="projectinput5">Lugar</label><br>
                                                                    <select class="js-states form-control numero" style="width: 100%;" id="s1" name="lugar" required>

                                                                    <th:block th:each="l : ${lugars}" th:if="${evento.id_evento == null}">
                                                                        <option th:if="${l.estado != 'X'}" th:value="${l.id_lugar}" selected th:text="${l.nom_lugar+'--'+l.direccion}"></option>
                                                                    </th:block>

                                                                    <option th:if="${evento.id_evento == null}" selected disable hidden></option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-4 col-sm-12">
                                                                <div class="form-group">
                                                                    <label for="projectinput5">Tipo Evento</label><br>
                                                                    <select class="js-states form-control numero" style="width: 100%;" id="s2" name="tipoEvento" required>

                                                                    <th:block th:each="t : ${tipoEventos}" th:if="${evento.id_evento == null}">
                                                                        <option th:if="${t.estado != 'X'}" th:value="${t.id_tipoEvento}" selected th:text="${t.desc_tipoEvento}"></option>
                                                                    </th:block>

                                                                    <option th:if="${evento.id_evento == null}" selected disable hidden></option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3 col-sm-12">
                                                                <div class="form-group">
                                                                    <label for="eventRegInput1">Descuento por mesa completa</label>
                                                                    <input type="number" id="des" class="form-control" th:field="${evento.descuento_mc}" required>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-1 col-sm-12">
                                                                <div class="form-group">
                                                                    <label for="eventRegInput1">Filas</label>                                        
                                                                    <input type="number" id="eventRegInput67" class="form-control" th:field="${evento.filas}" required>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-1 col-sm-12">
                                                                <div class="form-group">
                                                                    <label for="eventRegInput1">Columnas</label>                                        
                                                                    <input type="number" id="eventRegInput68" class="form-control" th:field="${evento.columnas}" required>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-6 col-sm-12">
                                                                <div class="form-group">
                                                                    <label>Subir Banner</label>
                                                                    <input accept="image/png,image/jpeg" name="archivo" class="form-control-file" id="projectinput7" type="file" >
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6 col-sm-12">
                                                                <div class="form-group">
                                                                    <label>Subir imagen de la sala</label>
                                                                    <input accept="image/png,image/jpeg" name="archivo2" class="form-control-file" id="projectinput8" type="file" >
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-lg-12 col-sm-12">
                                                                <button class="btn btn-success" type="submit" id="Enviar" style="width: 100%;">
                                                                    <i class="icon-note"></i> Guardar
                                                                </button>
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row match-height">
                                <div class="col-sm-12">
                                    <h2 class="content-header">LISTA DE EVENTOS</h2>
                                </div>
                            </div>
                            <div class="row match-height">
                                <div class="col-sm-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <div class="card-title-wrap bar-success">
                                                <h4 style="color: #FF9149;" class="card-title"><i class="fa fa-list-alt"></i>Eventos registrados</h4>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div class="card-block">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <table class="table display nowrap table-striped table-bordered scroll-horizontal">
                                                            <thead>
                                                                <tr>
                                                                    <th>EVENTO</th>
                                                                    <th>BANNER</th>
                                                                    <th>FONDO</th>
                                                                    <th>FILAS</th>
                                                                    <th>COLUMNAS</th>
                                                                    <th>LUGAR</th>
                                                                    <th>DESCUENTO</th>
                                                                    <th>HABILITADO</th>
                                                                    <th>TIPO EVENTO</th>
                                                                    <th>EDITAR SECTORES</th>
                                                                    <!--
                                                                    <th>COMPRA X MESA</th>
                                                                    -->
                                                                    <th>ESTADO</th>
                                                                    <th>OPERACIONES</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr th:each ="e : ${eventos}" th:if="${e.estado != 'X'}">
                                                                    <td th:text = "${e.desc_evento}"></td>
                                                                    <td>
                                                                        <button type="button" class="btn btn-outline-dark" data-toggle="modal"  th:attr="data-target='#default'+${e.id_evento}" ><i class="fa fa-eye font-medium-3"></i>&nbsp;Ver</button>
                                                                    </td>
                                                                    <td>
                                                                        <button type="button" class="btn btn-outline-dark" data-toggle="modal"  th:attr="data-target='#default1'+${e.id_evento}" ><i class="fa fa-eye font-medium-3"></i>&nbsp;Ver</button>
                                                                    </td>
                                                                    <td th:text = "${e.filas}"></td>
                                                                    <td th:text = "${e.columnas}"></td>
                                                                    <td th:text = "${e.lugar.nom_lugar}"></td>
                                                                    <td th:text = "${e.descuento_mc}"></td>
                                                                    <td>
                                                                        <tth:block th:if="${e.habilitado == 'H'}">
                                                                            <a style="width: 100%;" th:href="${'../../../../habilitarEvento/'+e.id_evento}" type="button" class="btn btn-success">Habilitado</a>
                                                                        </tth:block>
                                                                        <tth:block th:if="${e.habilitado == 'D'}">
                                                                            <a style="width: 100%;" th:href="${'../../../../habilitarEvento/'+e.id_evento}" type="button" class="btn btn-danger">Desabilitado</a>
                                                                        </tth:block>
                                                                    </td>
                                                                    <td th:text = "${e.tipoEvento.desc_tipoEvento}"></td>
                                                                    <td>
                                                                        <a style="width: 100%;" th:href="@{'../../../../eventoAR/'+ ${e.id_evento}}" type="button" class="btn btn-outline-dark" ><i class="fa fa-th"></i></a>
                                                                    </td>
                                                                    <!--
                                                                    <td>
                                                                        <tth:block th:if="${e.est_mesa_completa_evento == 'H'}">
                                                                            <a style="width: 100%;" th:href="${'../../../../habilitarCXMesa/'+e.id_evento}" type="button" class="btn btn-success">Habilitado</a>
                                                                        </tth:block>
                                                                        <tth:block th:if="${e.est_mesa_completa_evento == 'D'}">
                                                                            <a style="width: 100%;" th:href="${'../../../../habilitarCXMesa/'+e.id_evento}" type="button" class="btn btn-danger">Desabilitado</a>
                                                                        </tth:block>
                                                                    </td>
                                                                    -->
                                                                    <td th:text = "${e.estado}"></td>
                                                                    <td>
                                                                            <a class="btn btn-danger white" style="width: 100%;" th:href="@{'../../../../eliminiarEventoA/'+ ${e.id_evento}}" ><i class="fa fa-trash-o"></i></a>
                                                                            <!--
                                                                            <button type="button" class="btn btn-warning">
                                                                                <a data-toggle="modal"  th:attr="data-target='#default'+${l.id_sector}" class="white"><i class="fa fa-cog"></i></a>
                                                                            </button>
                                                                            -->
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <th:block  th:each ="e : ${eventos}" th:if="${e.estado != 'X'}">
                                                    <div class="modal fade text-left" th:id="${'default'+e.id_evento}" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel1" aria-hidden="true" >
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content" >
                                                                <div class="modal-header">
                                                                    <h4 class="modal-title" id="myModalLabel1">Imagen del Banner</h4>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                
                                                                <div class="modal-body">
                                                                    <div class="row">
                                                                        <div class="col-12 text-center" >
                                                                        <img th:src="@{'/uploads/' + ${e.img_evento}}" style="width: 100%; height: 100%;" alt="Sin banner">
                                                                        </div>
                                                                    </div>    
                                                                    <div class="modal-footer text-center" >                                
                                                                        <a href="#" th:href="@{'../../../../uploads/'+${e.img_evento}}" class="btn btn-warning" download>Descargar Imagen</a>
                                                                        <button type="button" class="btn grey btn-outline-secondary" data-dismiss="modal">Cerrar ventana</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </th:block>

                                                <th:block  th:each ="e1 : ${eventos}" th:if="${e1.estado != 'X'}">
                                                    <div class="modal fade text-left" th:id="${'default1'+e1.id_evento}" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel1" aria-hidden="true" >
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content" >
                                                                <div class="modal-header">
                                                                    <h4 class="modal-title" id="myModalLabel1">Imagen de Fondo</h4>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                
                                                                <div class="modal-body">
                                                                    <div class="row">
                                                                        <div class="col-12 text-center" >
                                                                        <img th:src="@{'/uploads/' + ${e1.img_sala}}" style="width: 100%; height: 100%;" alt="Sin imagen">
                                                                        </div>
                                                                    </div>    
                                                                    <div class="modal-footer text-center" >              
                                                                        <a href="#" th:href="@{'../../../../uploads/'+${e1.img_sala}}" class="btn btn-warning" download>Descargar Imagen</a>                  
                                                                        <button type="button" class="btn grey btn-outline-secondary" data-dismiss="modal">Cerrar ventana</button>                                                                
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </th:block>
                                                <!--
                                                <th:block  th:each ="eve : ${eventos}">
                                                    <div class="modal fade text-left" th:id="${'default'+eve.id_eventos}" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false" aria-labelledby="myModalLabel1" aria-hidden="true" >
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content" >
                                                                <div class="modal-header">
                                                                    <h4 class="modal-title" id="myModalLabel1" th:text="${'Detalle: '+eve.desc_evento}"></h4>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                
                                                                <div class="modal-body">
                                                                    <div class="card gradient-orange-amber">
                                                                        <div class="card-body">
                                                                            <div class="row">
                                                                                <div class="col-12 text-align  ">
                                                                                    <div class="media-body text-white text-left">
                                                                                        <form  th:action="@{'../../../../ticketF/'+${l1.id_sector}}" method="POST">
                                                                                            <div class="row">
                                                                                                <div class="col-12 form-group">
                                                                                                    <input type="number" max="50" min="1" class="form-control form-control-lg" placeholder="Numero de asientos para Comprar" name="num_asientos" required>
                                                                                                </div>
                                                                                            </div>
                                                                                            
                                                                                            
                                                                                            <div class="form-group text-center">
                                                                                                <div class="col-md-12">
                                                                                                    <button class="btn btn-primary px-4 py-2 text-uppercase white font-small-4 box-shadow-2 border-0" type="submit">Comprar ticket</button>
                                                                                                </div>
                                                                                            </div>
                                                                                        </form>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer text-center" >     
                                                                        <button type="button" class="btn grey btn-outline-secondary" data-dismiss="modal">Cerrar ventana</button>                                                                
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </th:block>
                                                -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>                            
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="layout/layoutMain :: scripts"></div>
    <script>
        $("#s1").select2({
            placeholder: "Seleccione...",
            type: "number;"
        });
        $("#s2").select2({
            placeholder: "Seleccione...",
            type: "number;"
        });
    </script>
    <script>
        window.onload = function() {
            $('#onload').fadeOut();
            $('body').removeClass('hidden');
        }
    </script>
    </body> 
</html>